variables:
  partition: ["ib", "eth"]
  nodes: [2, 4, 6, 8]

haicgu:
  scheduler: slurm

  default_conf:
    #reservation: "dcn_6"
    cpus_per_task: 128
    time: "00:30:00"
    account: "dcn"
    gpus: 0
    modules: 
      - "GCC/14.1.0"
      - "OpenMPI/5.0.3"
    exclude:
      - cn17
      - cn19

  configs:
    - name: "{partition}_{nodes}nodes"
      partition: "cn-{partition}"
      nodes: "{nodes}"
      ntasks: "{nodes}"

nanjing:
  scheduler: local

  default_conf:
    env:
      - "PATH=/root/hpc/build/gcc/bin:/root/hpc/build/bin:$PATH"
      - "LD_LIBRARY_PATH=/root/hpc/build/gcc/lib64:/root/hpc/build/lib:$LD_LIBRARY_PATH"

  configs:
    - name: "nanjing_{nodes}nodes"

leonardo:
  scheduler: slurm

  default_conf:
    cpus_per_task: 1
    time: "00:30:00"
    account: "try25_HNS"
    qos: "normal"
    gpus: 0
    modules:
      - "gcc/12.2.0"
      - "openmpi/4.1.6--gcc--12.2.0-cuda-12.2"

  configs:
    - name: "pytorch_stats"
      partition: "boost_usr_prod"
      nodes: 1
      ntasks: 1
      cpus-per-task: 32
      gpus: 4
    
    - name: "boost_usr_prod_{nodes}nodes"
      partition: "boost_usr_prod"
      nodes: "{nodes}"
      ntasks: "{nodes}"    
